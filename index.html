<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- FONT-FAMILY -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
        <!-- LINK CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <link rel="stylesheet" href="./css/style.css">
        <!-- TITLE PAGE -->
        <title>Boolzapp</title>
    </head>

        <!-- START BODY -->
    <body class="debug">
        <!-- START MAIN HEADER -->
        <header>
        </header>
        <!-- END MAIN HEADER -->

        <!-- START MAIN -->
        <main>
            <div id="app" class="my_container">
                
                <div class="main_chat">
                    
                    <div class="left_container">
                        <div class="header_left">
                            <div class="user_container">
                                <div class="p-2">
                                    <img src="./img/avatar_2.jpg" alt="">
                                </div>
                                <div class="name_user">
                                   Diego
                                </div>
                            </div>
                            <div class="header_icon">
                                <i class="fa-solid fa-circle-notch"></i>
                                <i class="fa-regular fa-message"></i>
                                <i class="fa-solid fa-ellipsis-vertical"></i>
                            </div>
                        </div>
                        <!-- Chat -->
                        <div>
                            <div class="notifiche_container">
                                <div class="ring_container">
                                    <i class="fa-solid fa-bell-slash"></i>
                                </div>
                                <div class="notifiche_text_container">
                                    <div>
                                        Ricevi le notifiche nuovi messaggi
                                    </div>
                                    <div class="turn_on_notifications">
                                        Attiva le notifiche dekstop
                                    </div>
                                </div>
                            </div>

                            <!-- BARRA RICERCA --> 
                            <div class="search_container">
                                <input class="w-100 " type="text" placeholder="Cerca" v-model="searchChat" @keyup="searchContact()">
                            </div>
                            

                            <!-- contacts -->
                            <div class="container_contacs">
                                <div class="single_user_chat" v-for = "(user, i) in contacts"
                                    :class ="{
                                        'active': i == activeContacts
                                    }" @click ="setActiveChat(i)"
                                    >
                                    <div class="d-flex" v-if="user.visible == true">
                                        <div class="me-2">
                                            <img :src="user.avatar" :alt="user.name">
                                        </div>
                                        <div class="name_user">
                                            <div>
                                              {{user.name}} 
                                            </div>
                                            <div class="color_gray">
                                                Ultimo messaggio inviato
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                             
                        </div>
                    </div>

                    <div class="right_container">
                        <div class="header_right">
                            <div class="d-flex">
                                <div class="me-2">
                                    <img :src="contacts[activeContacts].avatar" alt="">
                                </div>
                                <div class="name_user">
                                    <div>
                                       {{contacts[activeContacts].name}}  
                                    </div>
                                    <div class="color_gray">
                                        Ultimo accesso
                                    </div>
                                </div>
                            </div>
                            <div class="header_icon">
                                <i class="fa-solid fa-magnifying-glass"></i>
                                <i class="fa-solid fa-paperclip"></i>
                                <i class="fa-solid fa-ellipsis-vertical"></i>
                            </div>
                        </div>
                        <!-- CHAT MESSAGE -->
                        <div class="container_chat">
                            <!-- MESSAGGI INVIATI -->
                            <div class="chat">
                                <div v-for="(elem, i) in contacts[activeContacts].messages" :class= "elem.status == 'sent' ? 'sent_container' : 'received_container' ">
                                    <span>
                                        {{elem.message}}
                                    </span>
                                    
                                </div>
                                
                           </div>

                            </div>
                            <div class="input_text_container">
                                <div class="emoji_container">
                                    <i class="fa-regular fa-face-smile"></i>
                                </div>
                                <!-- input -->
                                <div>
                                    <input @keyup.enter="sendNewMessage()" v-model="newMessage" type="text" placeholder="Scrivi un messaggio">
                                </div>

                                <div class="mic_container">
                                    <i class="fa-solid fa-microphone"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
       

        <!--JS-->
        <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
        <script src="./js/script.js"></script>
    </body>
</html>